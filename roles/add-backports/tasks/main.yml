
# add it in a controlled way..

- name: add the backports for jessie
  apt_repository:
    repo: deb http://ftp.debian.org/debian stretch-backports main
    state: present
  when: ansible_os_family == "Debian" and ansible_distribution_release == "stretch"
  register: stretch_backports_added

- name: add the backports for jessie
  apt_repository:
    repo: deb http://ftp.debian.org/debian jessie-backports main
    state: present
  when: ansible_os_family == "Debian" and ansible_distribution_release == "jessie"
  register: jessie_backports_added

- name: add the backports for wheezy
  apt_repository:
    repo: deb http://ftp.debian.org/debian wheezy-backports main
    state: present
  when: ansible_os_family == "Debian" and ansible_distribution_release == "wheezy"
  register: wheezy_backports_added

- name: update the repository index
  apt:
    update_cache: yes
  when: jessie_backports_added.changed or wheezy_backports_added.changed

